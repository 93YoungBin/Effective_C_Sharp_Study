# Effective c# 

# 아이템 16: 생성자 내에서는 절대로 가상 함수를 호출하지 말라

## 가상 함수와 생성자 관련 에러
- 생성자가 수행을 완료하기 전까지는 객체가 완전히 생성된 것이 아님
- 상속 클래스가 인스턴스화 될 때 부모의 생성자가 먼저 호출되는데, 이때 부모의 생성자에서 가상함수를 호출할 경우 코드 플로우가 이상해 질 수 있다.

```
public class TestScript : TestParent
{
    private readonly string msg = "자식 멤버 변수 초기화";

    public TestScript(string msg2)
    {
        Debug.LogError("자식 클래스 생성자 init");
        this.msg = msg2;
    }
    public override void MyMethod()
    {
        Debug.LogError(msg);
    }
}


public class TestParent : MonoBehaviour
{
    public TestParent()
    {
        Debug.LogError("부모 클래스 생성자 Init");
        MyMethod();
    }

    public virtual void MyMethod()
    {
        Debug.LogError("부모 클래스 가상함수");
    }
}
```


```
    void Start()
    {
        var temp = new TestScript("자식 생성자 초기화");
    }
```

##결과는?

![l_8251422_1098_5502e612cb8c8fd104faa14a9e82fe13](https://github.com/93YoungBin/Effective_C_Sharp_Study/assets/32691585/9119325e-a0b0-4d9b-b072-989b5abb50b9)




